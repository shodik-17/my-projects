<!doctype html>
<html lang="uz">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Узкий Круг</title>
<style>
:root{--bg:#f5f6f8;--card:#fff;--accent:#ff5a5f}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:100vh;transition:0.6s;position:relative;}
body.playing{background:white}
.card{background:var(--card);padding:20px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,0.08);max-width:820px;width:95%;text-align:center;transition:0.5s}
.fixed-size{width:90vw;max-width:1200px;height:60vh;object-fit:cover;border-radius:8px}
.thumb{position:relative;display:inline-block;cursor:pointer;border-radius:8px;overflow:hidden;width:100%;max-width:100%;height:300px;transition:0.5s}
.thumb img{display:block;width:100%;height:100%;object-fit:cover}
.thumb .caption{position:absolute;bottom:0;left:0;right:0;padding:8px;font-size:18px;color:white;background:rgba(0,0,0,0.55);text-align:center;opacity:0;transform:translateY(-20px);transition:opacity 0.35s ease, transform 0.35s ease;}
.thumb:hover .caption{opacity:1;transform:translateY(0);}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:25px;transition:opacity 0.5s}
.grid.fade-in{opacity:1;animation:fadeIn 0.6s ease forwards}
@keyframes fadeIn{from{opacity:0;transform:scale(0.95)}to{opacity:1;transform:scale(1)}}
.uzk{color:#141313;margin-top:20px;font-size:50px;font-family:Verdana,Geneva,Tahoma,sans-serif;transition:opacity 0.5s;}
.hint{color:#666;margin-top:20px;font-size:20px;font-family:Verdana,Geneva,Tahoma,sans-serif;transition:opacity 0.5s;}
#videoContainer{position:relative;width:100%;display:flex;justify-content:center;align-items:center;margin-top:20px;}
#stopBtn{
  display:none;
  margin-top: 100px;
  padding:15px 50px;
  font-size:50px;
  font-weight:bold;
  border:none;
  border-radius:50px;
  background: linear-gradient(90deg,#ff5a5f,#ffb677);
  color:white;
  cursor:pointer;
  box-shadow:0 5px 20px rgba(0,0,0,0.3);
  transition: all 0.3s ease;
}
#stopBtn:hover{
  transform:scale(1.1);
  box-shadow:0 8px 25px rgba(0,0,0,0.4);
  background: linear-gradient(90deg,#ffb677,#ff5a5f);
}
</style>
</head>
<body>
<div class="card" id="mainCard">
  <h2 class="uzk" id="title">Узкий Круг</h2>
  <p class="hint" id="hint">Нажмите на Картинку</p>
  <div class="grid fade-in" id="grid">
    <div class="thumb" data-video="1">
      <img src="mirik.jpg" alt="1-rasm" />
      <div class="caption">MIRIK</div>
    </div>
    <div class="thumb" data-video="2">
      <img src="shaxa.jpg" alt="2-rasm" />
      <div class="caption">SHAXA</div>
    </div>
    <div class="thumb" data-video="3">
      <img src="jaxa.jpg" alt="3-rasm" />
      <div class="caption">JAXA</div>
    </div>
  </div>
</div>

<div id="videoContainer"></div>
<button id="stopBtn">STOP</button>

<script>
const videos = {
  1:'mirik.mov',
  2:'shaxa.mov',
  3:'jaxa.mov'
};

const grid = document.getElementById('grid');
const hint = document.getElementById('hint');
const title = document.getElementById('title');
const videoContainer = document.getElementById('videoContainer');
const stopBtn = document.getElementById('stopBtn');

document.querySelectorAll('.thumb').forEach(t=>{
  t.addEventListener('click',()=>{
    // yozuv va rasm gridni yashirish
    title.style.display = 'none';
    hint.style.display = 'none';
    grid.style.display = 'none';
    startVideo(videos[t.dataset.video]);
  });
});

function startVideo(src){
  document.body.classList.add('playing');
  videoContainer.innerHTML='';

  const v = document.createElement('video');
  v.controls = true;
  v.autoplay = true;
  v.className = 'fixed-size';

  const s = document.createElement('source');
  s.src = src;
  s.type = 'video/mp4';
  v.appendChild(s);

  v.onended = () => stopVideo(v);

  videoContainer.appendChild(v);

  // STOP tugmasi ko‘rinadi
  stopBtn.style.display = 'block';
  stopBtn.onclick = () => stopVideo(v);

  v.scrollIntoView({behavior:'smooth'});
}

function stopVideo(v){
  if(v) v.pause();
  videoContainer.innerHTML='';
  document.body.classList.remove('playing');

  // Barchani boshlang‘ich holatga qaytarish
  grid.style.display = 'grid';
  title.style.display = 'block';
  hint.style.display = 'block';
  stopBtn.style.display = 'none';
  grid.classList.add('fade-in');
  grid.scrollIntoView({behavior:'smooth'});
}
</script>
</body>
</html>
